@using WebApplication.Models.Model

@{
    var dB = new WebApplication.Models.DataContext.BlogDBContext();
    Admin currentUser = null;

    if (User.Identity.IsAuthenticated && Session["Admin"] != null)
    {
        int adminId = (int)Session["Admin"];
        currentUser = dB.Admin.Find(adminId);
    }
}

<div class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="@Url.Action("Index", "Home")">
                <img style="max-height:75px;" onmouseover="this.style.opacity='0.6'" onmouseout="this.style.opacity='1'"
                     src="@Url.Content(ViewBag.SiteLogo.LogoURL)">
            </a>
        </div>
        <div class="navbar-collapse collapse">
            <style>
                @@media (max-width: 768px) {
                    .navbar-nav>li>a {
                        padding: 10px 15px;
                        border-bottom: 1px solid #eee;
                    }

                    .dropdown-menu {
                        position: static;
                        float: none;
                        width: auto;
                        margin-top: 0;
                        background-color: #fff;
                        border: 0;
                        box-shadow: none;
                    }

                    .dropdown-menu>li>a {
                        padding: 10px 25px;
                        color: #777;
                    }

                    .dropdown-menu>li>a:hover {
                        background-color: #f5f5f5;
                    }

                    .btn {
                        margin: 5px 0;
                        width: 100%;
                    }
                }
            </style>
            <ul class="nav navbar-nav">
                <li><a href="@Url.Action("Index", "Home")">Ana Sayfa</a></li>
                <li><a href="@Url.Content("/Home/About")">Hakkımızda</a></li>
                <li><a href="@Url.Content("/Home/Blog")">Blog</a></li>
                <li><a href="@Url.Content("/Home/Contact")">İletişim</a></li>

                @if (currentUser != null)
                {
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                           aria-expanded="false">
                            <i class="fas fa-user"></i> @currentUser.Name @currentUser.Surname <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            @if (currentUser.Authority == "Admin")
                            {
                                <li><a href="@Url.Action("Index", "Admin")"><i class="fas fa-cog"></i> Admin Paneli</a></li>
                                <li><a href="@Url.Action("Index", "Comment")"><i class="fas fa-comments"></i> Yorum Yönetimi</a></li>
                                <li><a href="@Url.Action("Edit", "Admin", new { id = currentUser.AdminId })"><i class="fas fa-user-edit"></i> Profil Düzenle</a></li>
                            }
                            else if (currentUser.Authority == "Editor")
                            {
                                <li><a href="@Url.Action("Index", "Blog")"><i class="fas fa-edit"></i> Blog Yönetimi</a></li>
                                <li><a href="@Url.Action("Index", "Category")"><i class="fas fa-tags"></i> Kategori Yönetimi</a></li>
                                <li><a href="@Url.Action("Edit", "Profile")"><i class="fas fa-user-edit"></i> Profil Düzenle</a></li>
                            }
                            else if (currentUser.Authority == "Member")
                            {
                                <li><a href="@Url.Action("Edit", "Profile")"><i class="fas fa-user-edit"></i> Profil Düzenle</a></li>
                            }
                            <li role="separator" class="divider"></li>
                            <li><a href="@Url.Action("Logout", "Admin")"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a></li>
                        </ul>
                    </li>
                }
                else
                {
                    <li>
                        <a href="@Url.Action("Login", "Admin", new { returnUrl = Request.Url.PathAndQuery })"
                           style="padding:5px; color: #ffa300; border-radius:20%" class="btn btn-blue me-2">
                            <i class="fas fa-sign-in-alt"></i> Giriş Yap
                        </a>
                    </li>
                    <li>
                        <a href="@Url.Action("Signup", "Admin")" style="padding: 5px; color: #ffa300; border-radius: 20%"
                           class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Kayıt Ol
                        </a>
                    </li>
                }
            </ul>
        </div>
    </div>
</div>